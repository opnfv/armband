From: Alexandru Avadanii <Alexandru.Avadanii@enea.com>
Date: Sun, 6 Aug 2017 19:34:06 +0200
Subject: [PATCH] mcp/config: AArch64 baremetal: Use arm64 image

While at it, bump default vCPU number from 2 to 6.

Signed-off-by: Alexandru Avadanii <Alexandru.Avadanii@enea.com>
---
 mcp/config/scenario/baremetal/defaults.yaml                           | 4 ++--
 mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/init.yml | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/mcp/config/scenario/baremetal/defaults.yaml b/mcp/config/scenario/baremetal/defaults.yaml
index b841e88..17fbbfc 100644
--- a/mcp/config/scenario/baremetal/defaults.yaml
+++ b/mcp/config/scenario/baremetal/defaults.yaml
@@ -1,6 +1,6 @@
-base_image: https://cloud-images.ubuntu.com/xenial/current/xenial-server-cloudimg-amd64-disk1.img
+base_image: https://cloud-images.ubuntu.com/xenial/current/xenial-server-cloudimg-arm64-uefi1.img
 virtual:
   default:
-    vcpus: 2
+    vcpus: 6
     ram: 4096

diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/init.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/init.yml
index 55ffcae..93e2de0 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/init.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/init.yml
@@ -51,7 +51,7 @@ parameters:
       address: ${_param:single_address}
       netmask: 255.255.255.0

-    salt_control_xenial_image: https://cloud-images.ubuntu.com/xenial/current/xenial-server-cloudimg-amd64-disk1.img
+    salt_control_xenial_image: https://cloud-images.ubuntu.com/xenial/current/xenial-server-cloudimg-arm64-uefi1.img
     salt_api_password_hash: "$6$WV0P1shnoDh2gI/Z$22/Bcd7ffMv0jDlFpT63cAU4PiXHz9pjXwngToKwqAsgoeK4HNR3PiKaushjxp3JsQ8hNoJmAC6TxzVqfV8WH/"
   linux:
     network:
