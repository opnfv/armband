From: Charalampos Kominos <Charalampos.Kominos@enea.com>
Date: Wed, 23 Aug 2017 10:18:26 +0200
Subject: Add pharos user to the deployment

Signed-off-by: Alexandru Avadanii <Alexandru.Avadanii@enea.com>
Signed-off-by: Charalampos Kominos <Charalampos.Kominos@enea.com>
Signed-off-by: Guillermo Herrero <Guillermo.Herrero@enea.com>
---
 mcp/config/states/maas               | 1 +
 mcp/salt-formulas/pharos/adduser.sls | 7 +++++++
 2 files changed, 8 insertions(+)
 create mode 100644 mcp/salt-formulas/pharos/adduser.sls

diff --git a/mcp/config/states/maas b/mcp/config/states/maas
index 0cf4f68..afe5808 100755
--- a/mcp/config/states/maas
+++ b/mcp/config/states/maas
@@ -52,6 +52,7 @@ wait_for "! salt '*' test.ping | tee /dev/stderr | fgrep -q 'Not connected'"

 salt -C '* and not cfg01* and not mas01*' state.apply linux,ntp

+salt- C '*' state.apply pharos.adduser
 salt -C 'kvm*' state.sls armband,armband.libvirt_domain_template
 salt -C 'kvm*' state.sls libvirt

diff --git a/mcp/salt-formulas/pharos/adduser.sls b/mcp/salt-formulas/pharos/adduser.sls
new file mode 100644
index 0000000..0d5c393
--- /dev/null
+++ b/mcp/salt-formulas/pharos/adduser.sls
@@ -0,0 +1,7 @@
+add_pharos_user:
+  user.present:
+  - name: opnfv
+  - password: $1$5/pIEHT1$XFBhNWW4Q8gYd19hczgPF1
+  - createhome: True
+  - groups:
+    - sudo