From: Stanislaw Kardach <stanislaw.kardach@caviumnetworks.com>
Date: Thu, 3 Mar 2016 19:04:07 +0100
Subject: [PATCH] Build bootstrap image for arm64

For now the arch is hardcoded for simplicity. We should detect this
but how? If we're multi-arch then one bootstrap image should be built
per supported arch. This requires Fuel refactoring.
---
 build/bootstrap_admin_node.sh.patch | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

diff --git a/build/patch-repos/0010-bootstrap_admin_node.sh.patch b/build/patch-repos/0010-bootstrap_admin_node.sh.patch
--- a/build/patch-repos/0010-bootstrap_admin_node.sh.patch
+++ b/build/patch-repos/0010-bootstrap_admin_node.sh.patch
@@ -53,3 +53,12 @@
  # Enable iptables
  systemctl enable iptables.service
+@@ -484,7 +490,7 @@
+         local ret=1
+         echo ${bs_progress_message} >&2
+         set_ui_bootstrap_error "${bs_progress_message}" >&2
+-        if fuel-bootstrap -v --debug build --activate >>"$bs_build_log" 2>&1; then
++        if fuel-bootstrap -v --debug build --target_arch arm64 --activate >>"$bs_build_log" 2>&1; then
+           ret=0
+           fuel notify --topic "done" --send "${bs_done_message}"
+         else
 @@ -532,6 +545,16 @@ systemctl start ntpd
