From: Stanislaw Kardach <stanislaw.kardach@cavium.com>
Date: Thu, 3 Mar 2016 19:04:07 +0100
Subject: [PATCH] Build bootstrap image for arm64

For now the arch is hardcoded for simplicity. We should detect this
but how? If we're multi-arch then one bootstrap image should be built
per supported arch. This requires Fuel refactoring.
---
 .../0001-OPNFV-Additions-to-bootstrap_admin_node.sh.patch        | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/build/f_repos/patch/fuel-main/0001-OPNFV-Additions-to-bootstrap_admin_node.sh.patch b/build/f_repos/patch/fuel-main/0001-OPNFV-Additions-to-bootstrap_admin_node.sh.patch
index c2e664c..12d0dfb 100644
--- a/build/f_repos/patch/fuel-main/0001-OPNFV-Additions-to-bootstrap_admin_node.sh.patch
+++ b/build/f_repos/patch/fuel-main/0001-OPNFV-Additions-to-bootstrap_admin_node.sh.patch
@@ -73,6 +73,15 @@ index 3197c91..db3123d 100755

  # Enable iptables
  systemctl enable iptables.service
+@@ -484,7 +490,7 @@
+         local ret=1
+         echo ${bs_progress_message} >&2
+         set_ui_bootstrap_error "${bs_progress_message}" >&2
+-        if fuel-bootstrap -v --debug build --activate >>"$bs_build_log" 2>&1; then
++        if fuel-bootstrap -v --debug build --target_arch arm64 --activate >>"$bs_build_log" 2>&1; then
+           ret=0
+           fuel notify --topic "done" --send "${bs_done_message}"
+         else
 @@ -532,6 +545,16 @@ systemctl start ntpd

  bash /etc/rc.local
