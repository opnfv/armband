::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
: Copyright (c) 2018 Enea AB and others.
:
: All rights reserved. This program and the accompanying materials
: are made available under the terms of the Apache License, Version 2.0
: which accompanies this distribution, and is available at
: http://www.apache.org/licenses/LICENSE-2.0
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
From: Charalampos Kominos <Charalampos.Kominos@enea.com>
Date: Fri, 27 Apr 2018 14:54:22 +0200
Subject: [PATCH] Set volume name in source file to sdX

Signed-off-by: Charalampos Kominos <Charalampos.Kominos@enea.com>
---
 .../cluster/mcp-pike-common-ha/openstack_control.yml.j2     | 2 +-
 .../cluster/mcp-pike-common-noha/openstack_control.yml      | 6 ++++++
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/mcp/reclass/classes/cluster/mcp-pike-common-ha/openstack_control.yml.j2 b/mcp/reclass/classes/cluster/mcp-pike-common-ha/openstack_control.yml.j2
index 6f7b33e3..dfc212e2 100644
--- a/mcp/reclass/classes/cluster/mcp-pike-common-ha/openstack_control.yml.j2
+++ b/mcp/reclass/classes/cluster/mcp-pike-common-ha/openstack_control.yml.j2
@@ -139,7 +139,7 @@ parameters:
     server:
       cacert: /etc/ssl/certs/mcp_os_cacert
       openrc_extra:
-        volume_device_name: vdc
+        volume_device_name: sdc
   bind:
     server:
       control:
diff --git a/mcp/reclass/classes/cluster/mcp-pike-common-noha/openstack_control.yml b/mcp/reclass/classes/cluster/mcp-pike-common-noha/openstack_control.yml
index 1c94738a..74667e21 100644
--- a/mcp/reclass/classes/cluster/mcp-pike-common-noha/openstack_control.yml
+++ b/mcp/reclass/classes/cluster/mcp-pike-common-noha/openstack_control.yml
@@ -58,6 +58,12 @@ parameters:
       admin_email: ${_param:admin_email}
       openrc_extra:
         volume_device_name: vdc
+        volume_device_name: sdc
+      pkgs:
+        - keystone
+        - python-psycopg2
+        - python-mysqldb
+        - python-openstackclient
   glance:
     server:
       storage:
