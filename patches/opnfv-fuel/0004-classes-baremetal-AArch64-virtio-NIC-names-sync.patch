::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
: Copyright (c) 2017 Enea AB and others.
:
: All rights reserved. This program and the accompanying materials
: are made available under the terms of the Apache License, Version 2.0
: which accompanies this distribution, and is available at
: http://www.apache.org/licenses/LICENSE-2.0
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
From: Alexandru Avadanii <Alexandru.Avadanii@enea.com>
Date: Sun, 6 Aug 2017 20:42:47 +0200
Subject: [PATCH] classes: baremetal: AArch64: virtio NIC names sync

grep -e "ens[[:digit:]]" -R . -l | \
  xargs sed -i \
    -e 's/ens3/enp1s0/g' \
    -e 's/ens4/enp2s0/g' \
    -e 's/ens5/enp3s0/g' \
    -e 's/ens6/enp4s0/g'

Since AArch64 will be using virtio-net-pci NIC model for guests,
predictable interface naming yields a slightly different scheme.

Update all configuration to reflect this.

NOTE: Above configuration is expected with libvirt 3.x, which puts
each NIC on a separate PCIe bus (which also imposes virtio modern
is used).

Signed-off-by: Alexandru Avadanii <Alexandru.Avadanii@enea.com>
---
 .../baremetal-mcp-ocata-odl-ha/infra/config.yml       |  4 ++--
 .../cluster/baremetal-mcp-ocata-odl-ha/infra/kvm.yml  | 16 +++++++++++-----
 .../cluster/baremetal-mcp-ocata-odl-ha/infra/maas.yml |  6 +++---
 .../opendaylight/control.yml                          |  2 +-
 .../baremetal-mcp-ocata-odl-ha/openstack/compute.yml  | 19 ++++++-------------
 .../baremetal-mcp-ocata-odl-ha/openstack/control.yml  |  6 +++---
 .../openstack/dashboard.yml                           |  4 ++--
 .../baremetal-mcp-ocata-odl-ha/openstack/database.yml |  6 +++---
 .../openstack/message_queue.yml                       |  6 +++---
 .../baremetal-mcp-ocata-odl-ha/openstack/proxy.yml    |  6 +++---
 .../openstack/telemetry.yml                           |  6 +++---
 .../baremetal-mcp-ocata-ovs-ha/infra/config.yml       |  4 ++--
 .../cluster/baremetal-mcp-ocata-ovs-ha/infra/kvm.yml  | 16 +++++++++++-----
 .../cluster/baremetal-mcp-ocata-ovs-ha/infra/maas.yml |  6 +++---
 .../baremetal-mcp-ocata-ovs-ha/openstack/compute.yml  | 19 ++++++-------------
 .../baremetal-mcp-ocata-ovs-ha/openstack/control.yml  |  6 +++---
 .../openstack/dashboard.yml                           |  4 ++--
 .../baremetal-mcp-ocata-ovs-ha/openstack/database.yml |  6 +++---
 .../openstack/message_queue.yml                       |  6 +++---
 .../baremetal-mcp-ocata-ovs-ha/openstack/proxy.yml    |  6 +++---
 .../openstack/telemetry.yml                           |  6 +++---
 21 files changed, 79 insertions(+), 81 deletions(-)

diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/config.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/config.yml
index 15202f1..6ddb8a2 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/config.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/config.yml
@@ -34,8 +34,8 @@ parameters:
   linux:
     network:
       interface:
-        ens3: ${_param:linux_dhcp_interface}
-        ens4: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
   salt:
     master:
       accept_policy: open_mode
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/kvm.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/kvm.yml
index da26254..5e4ea66 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/kvm.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/kvm.yml
@@ -26,7 +26,8 @@ parameters:
     cluster_node03_address: ${_param:infra_kvm_node03_address}
     keepalived_vip_interface: br-ctl
     keepalived_vip_virtual_router_id: 69
-    deploy_nic: enp6s0
+    deploy_nic: eth0
+    trunk_nic: eth1
   salt:
     control:
       size:  # RAM 4096,8192,16384,32768,65536
@@ -141,7 +142,7 @@ parameters:
   linux:
     network:
       interface:
-        eth3:
+        eth0:
           enabled: true
           type: eth
           proto: manual
@@ -149,6 +150,11 @@ parameters:
           netmask: 255.255.255.0
           name: ${_param:deploy_nic}
           noifupdown: true
+        eth1:
+          enabled: true
+          type: eth
+          proto: manual
+          name: ${_param:trunk_nic}
         br-mgmt:
           enabled: true
           proto: dhcp
@@ -161,9 +167,9 @@ parameters:
           enabled: true
           proto: manual
           type: vlan
-          name: ${_param:deploy_nic}.${_param:opnfv_net_mgmt_vlan}
+          name: ${_param:trunk_nic}.${_param:opnfv_net_mgmt_vlan}
           use_interfaces:
-            - ${_param:deploy_nic}
+            - ${_param:trunk_nic}
         br-ctl:
           enabled: true
           type: bridge
@@ -171,4 +177,4 @@ parameters:
           address: ${_param:single_address}
           netmask: 255.255.255.0
           use_interfaces:
-            - ${_param:deploy_nic}.${_param:opnfv_net_mgmt_vlan}
+            - ${_param:trunk_nic}.${_param:opnfv_net_mgmt_vlan}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/maas.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/maas.yml
index cbb1caf..e54621c 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/maas.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/infra/maas.yml
@@ -5,9 +5,9 @@ classes:
   - cluster.baremetal-mcp-ocata-odl-ha.infra
 parameters:
   _param:
-    dhcp_interface: ens3
-    primary_interface: ens4
-    pxe_interface: ens5
+    dhcp_interface: enp1s0
+    primary_interface: enp2s0
+    pxe_interface: enp3s0
     interface_mtu: 1500
     # MaaS has issues using MTU > 1500 for PXE interface
     pxe_interface_mtu: 1500
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/opendaylight/control.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/opendaylight/control.yml
index d473a07..d77d204 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/opendaylight/control.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/opendaylight/control.yml
@@ -11,7 +11,7 @@ parameters:
   linux:
     network:
       interface:
-        ens3:
+        enp2s0:
           enabled: true
           type: eth
           proto: static
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/compute.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/compute.yml
index ba0f385..a41df69 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/compute.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/compute.yml
@@ -25,10 +25,9 @@ parameters:
     cluster_node03_hostname: ctl03
     cluster_node03_address: ${_param:openstack_control_node03_address}
     nova_vncproxy_url: https://${_param:cluster_public_host}:6080
-    mgmt_nic: enp6s0
-    tenant_nic: enp7s0
+    mgmt_nic: eth0
+    tenant_nic: eth1
     linux_system_codename: xenial
-    external_nic: enp8s0
     interface_mtu: 1500
     keepalived_vip_interface: br-ctl
     keepalived_vip_virtual_router_id: 69
@@ -78,12 +77,6 @@ parameters:
           type: eth
           proto: manual
           name: ${_param:tenant_nic}
-        external_nic:
-          enabled: true
-          name: ${_param:external_nic}
-          mtu: ${_param:interface_mtu}
-          proto: manual
-          type: eth
         br-mesh:
           enabled: true
           type: bridge
@@ -96,9 +89,9 @@ parameters:
           enabled: true
           proto: manual
           type: vlan
-          name: ${_param:mgmt_nic}.${_param:opnfv_net_mgmt_vlan}
+          name: ${_param:tenant_nic}.${_param:opnfv_net_mgmt_vlan}
           use_interfaces:
-            - ${_param:mgmt_nic}
+            - ${_param:tenant_nic}
         tenant-vlan:
           enabled: true
           proto: manual
@@ -113,7 +106,7 @@ parameters:
           address: ${_param:single_address}
           netmask: 255.255.255.0
           use_interfaces:
-            - ${_param:mgmt_nic}.${_param:opnfv_net_mgmt_vlan}
+            - ${_param:tenant_nic}.${_param:opnfv_net_mgmt_vlan}
         br-floating:
           enabled: true
           type: ovs_bridge
@@ -130,6 +123,6 @@ parameters:
           address: ${_param:external_address}
           netmask: 255.255.255.0
           use_interfaces:
-            - ${_param:external_nic}
+            - ${_param:tenant_nic}
           use_ovs_ports:
             - float-to-ex
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/control.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/control.yml
index 9b72199..c863313 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/control.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/control.yml
@@ -24,7 +24,7 @@ classes:
   - cluster.baremetal-mcp-ocata-odl-ha.infra
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 50
     cluster_vip_address: ${_param:openstack_control_address}
     cluster_local_address: ${_param:single_address}
@@ -38,8 +38,8 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
   keystone:
     server:
       cacert: /etc/ssl/certs/mcp_os_cacert
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/dashboard.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/dashboard.yml
index ddcc196..2f56b5a 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/dashboard.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/dashboard.yml
@@ -8,5 +8,5 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/database.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/database.yml
index e59c479..66e1905 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/database.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/database.yml
@@ -17,7 +17,7 @@ classes:
   - cluster.baremetal-mcp-ocata-odl-ha
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 80
     galera_server_cluster_name: openstack_cluster
     galera_max_connections: 3072
@@ -33,5 +33,5 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/message_queue.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/message_queue.yml
index 3c6427c..2ab5489 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/message_queue.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/message_queue.yml
@@ -8,7 +8,7 @@ classes:
   - cluster.baremetal-mcp-ocata-odl-ha
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 90
     cluster_vip_address: ${_param:openstack_message_queue_address}
     cluster_local_address: ${_param:single_address}
@@ -21,5 +21,5 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/proxy.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/proxy.yml
index 446157d..266b536 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/proxy.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/proxy.yml
@@ -18,7 +18,7 @@ classes:
   # - cluster.baremetal-mcp-ocata-odl-ha.stacklight.proxy
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 240
     nginx_proxy_ssl:
       enabled: true
@@ -30,8 +30,8 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
     system:
       package:
         libapache2-mod-wsgi:
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/telemetry.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/telemetry.yml
index e1c969c..920b657 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/telemetry.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-odl-ha/openstack/telemetry.yml
@@ -13,7 +13,7 @@ classes:
   - cluster.baremetal-mcp-ocata-odl-ha.infra
 parameters:
   _param:
-    keepalived_openstack_telemetry_vip_interface: ens3
+    keepalived_openstack_telemetry_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 230
     cluster_vip_address: ${_param:openstack_telemetry_address}
     cluster_local_address: ${_param:single_address}
@@ -26,8 +26,8 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
   mongodb:
     server:
       logging:
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/config.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/config.yml
index 3966dae..7fd1716 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/config.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/config.yml
@@ -33,8 +33,8 @@ parameters:
   linux:
     network:
       interface:
-        ens3: ${_param:linux_dhcp_interface}
-        ens4: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
   salt:
     master:
       accept_policy: open_mode
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/kvm.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/kvm.yml
index 9e023e3..95bacb2 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/kvm.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/kvm.yml
@@ -26,7 +26,8 @@ parameters:
     cluster_node03_address: ${_param:infra_kvm_node03_address}
     keepalived_vip_interface: br-ctl
     keepalived_vip_virtual_router_id: 69
-    deploy_nic: enp6s0
+    deploy_nic: eth0
+    trunk_nic: eth1
   salt:
     control:
       size:  # RAM 4096,8192,16384,32768,65536
@@ -131,7 +132,7 @@ parameters:
   linux:
     network:
       interface:
-        eth3:
+        eth0:
           enabled: true
           type: eth
           proto: manual
@@ -139,6 +140,11 @@ parameters:
           netmask: 255.255.255.0
           name: ${_param:deploy_nic}
           noifupdown: true
+        eth1:
+          enabled: true
+          type: eth
+          proto: manual
+          name: ${_param:trunk_nic}
         br-mgmt:
           enabled: true
           proto: dhcp
@@ -151,9 +157,9 @@ parameters:
           enabled: true
           proto: manual
           type: vlan
-          name: ${_param:deploy_nic}.${_param:opnfv_net_mgmt_vlan}
+          name: ${_param:trunk_nic}.${_param:opnfv_net_mgmt_vlan}
           use_interfaces:
-            - ${_param:deploy_nic}
+            - ${_param:trunk_nic}
         br-ctl:
           enabled: true
           type: bridge
@@ -161,4 +167,4 @@ parameters:
           address: ${_param:single_address}
           netmask: 255.255.255.0
           use_interfaces:
-            - ${_param:deploy_nic}.${_param:opnfv_net_mgmt_vlan}
+            - ${_param:trunk_nic}.${_param:opnfv_net_mgmt_vlan}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/maas.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/maas.yml
index 2922fa3..99ca6ce 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/maas.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/infra/maas.yml
@@ -5,9 +5,9 @@ classes:
   - cluster.baremetal-mcp-ocata-ovs-ha.infra
 parameters:
   _param:
-    dhcp_interface: ens3
-    primary_interface: ens4
-    pxe_interface: ens5
+    dhcp_interface: enp1s0
+    primary_interface: enp2s0
+    pxe_interface: enp3s0
     interface_mtu: 1500
     # MaaS has issues using MTU > 1500 for PXE interface
     pxe_interface_mtu: 1500
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/compute.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/compute.yml
index ff97fe8..e3f0cff 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/compute.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/compute.yml
@@ -24,9 +24,8 @@ parameters:
     cluster_node03_hostname: ctl03
     cluster_node03_address: ${_param:openstack_control_node03_address}
     nova_vncproxy_url: https://${_param:cluster_public_host}:6080
-    mgmt_nic: enp6s0
-    tenant_nic: enp7s0
-    external_nic: enp8s0
+    mgmt_nic: eth0
+    tenant_nic: eth1
     linux_system_codename: xenial
     interface_mtu: 1500
     keepalived_vip_interface: br-ctl
@@ -61,12 +60,6 @@ parameters:
           type: eth
           proto: manual
           name: ${_param:tenant_nic}
-        external_nic:
-          enabled: true
-          name: ${_param:external_nic}
-          mtu: ${_param:interface_mtu}
-          proto: manual
-          type: eth
         br-mesh:
           enabled: true
           type: bridge
@@ -79,9 +72,9 @@ parameters:
           enabled: true
           proto: manual
           type: vlan
-          name: ${_param:mgmt_nic}.${_param:opnfv_net_mgmt_vlan}
+          name: ${_param:tenant_nic}.${_param:opnfv_net_mgmt_vlan}
           use_interfaces:
-            - ${_param:mgmt_nic}
+            - ${_param:tenant_nic}
         tenant-vlan:
           enabled: true
           proto: manual
@@ -96,7 +89,7 @@ parameters:
           address: ${_param:single_address}
           netmask: 255.255.255.0
           use_interfaces:
-            - ${_param:mgmt_nic}.${_param:opnfv_net_mgmt_vlan}
+            - ${_param:tenant_nic}.${_param:opnfv_net_mgmt_vlan}
         br-floating:
           enabled: true
           type: ovs_bridge
@@ -113,6 +106,6 @@ parameters:
           address: ${_param:external_address}
           netmask: 255.255.255.0
           use_interfaces:
-            - ${_param:external_nic}
+            - ${_param:tenant_nic}
           use_ovs_ports:
             - float-to-ex
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/control.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/control.yml
index f0c03cc..aa92d99 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/control.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/control.yml
@@ -24,7 +24,7 @@ classes:
   - cluster.baremetal-mcp-ocata-ovs-ha.infra
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 50
     cluster_vip_address: ${_param:openstack_control_address}
     cluster_local_address: ${_param:single_address}
@@ -38,8 +38,8 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
   keystone:
     server:
       cacert: /etc/ssl/certs/mcp_os_cacert
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/dashboard.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/dashboard.yml
index f2e010d..160d69c 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/dashboard.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/dashboard.yml
@@ -8,5 +8,5 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/database.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/database.yml
index b8a43d8..b449230 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/database.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/database.yml
@@ -17,7 +17,7 @@ classes:
   - cluster.baremetal-mcp-ocata-ovs-ha
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 80
     galera_server_cluster_name: openstack_cluster
     galera_max_connections: 3072
@@ -33,5 +33,5 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/message_queue.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/message_queue.yml
index 66b5822..4cd076d 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/message_queue.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/message_queue.yml
@@ -8,7 +8,7 @@ classes:
   - cluster.baremetal-mcp-ocata-ovs-ha
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 90
     cluster_vip_address: ${_param:openstack_message_queue_address}
     cluster_local_address: ${_param:single_address}
@@ -21,5 +21,5 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/proxy.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/proxy.yml
index e948d93..b4cf0ca 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/proxy.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/proxy.yml
@@ -18,7 +18,7 @@ classes:
   # - cluster.baremetal-mcp-ocata-ovs-ha.stacklight.proxy
 parameters:
   _param:
-    keepalived_vip_interface: ens3
+    keepalived_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 240
     nginx_proxy_ssl:
       enabled: true
@@ -30,8 +30,8 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
     system:
       package:
         libapache2-mod-wsgi:
diff --git a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/telemetry.yml b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/telemetry.yml
index 4389a49..0f8f467 100644
--- a/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/telemetry.yml
+++ b/mcp/reclass/classes/cluster/baremetal-mcp-ocata-ovs-ha/openstack/telemetry.yml
@@ -13,7 +13,7 @@ classes:
   - cluster.baremetal-mcp-ocata-ovs-ha.infra
 parameters:
   _param:
-    keepalived_openstack_telemetry_vip_interface: ens3
+    keepalived_openstack_telemetry_vip_interface: enp2s0
     keepalived_vip_virtual_router_id: 230
     cluster_vip_address: ${_param:openstack_telemetry_address}
     cluster_local_address: ${_param:single_address}
@@ -26,8 +26,8 @@ parameters:
   linux:
     network:
       interface:
-        ens2: ${_param:linux_dhcp_interface}
-        ens3: ${_param:linux_single_interface}
+        enp1s0: ${_param:linux_dhcp_interface}
+        enp2s0: ${_param:linux_single_interface}
   mongodb:
     server:
       logging:
