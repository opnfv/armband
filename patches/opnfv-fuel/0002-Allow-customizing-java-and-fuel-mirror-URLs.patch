From: Stanislaw Kardach <stanislaw.kardach@caviumnetworks.com>
Date: Wed, 24 Feb 2016 20:02:25 +0100
Subject: [PATCH] Allow customizing java and fuel-mirror URLs

---
 build/f_isoroot/f_odlpluginbuild/Makefile | 2 +-
 build/f_isoroot/f_repobuild/Makefile      | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/build/f_isoroot/f_odlpluginbuild/Makefile b/build/f_isoroot/f_odlpluginbuild/Makefile
index f2a47b7..b0bc9c7 100644
--- a/build/f_isoroot/f_odlpluginbuild/Makefile
+++ b/build/f_isoroot/f_odlpluginbuild/Makefile
@@ -12,7 +12,7 @@ ODL_BRANCH=brahmaputra-release
 ODL_REPO="https://github.com/openstack/fuel-plugin-opendaylight.git"
 
 export USE_JAVA8=true
-export JAVA8_URL=https://launchpad.net/~openjdk-r/+archive/ubuntu/ppa/+files/openjdk-8-jre-headless_8u72-b15-1~trusty1_amd64.deb
+export JAVA8_URL:=https://launchpad.net/~openjdk-r/+archive/ubuntu/ppa/+files/openjdk-8-jre-headless_8u72-b15-1~trusty1_amd64.deb
 
 .PHONY: all
 all: .odlbuild
diff --git a/build/f_isoroot/f_repobuild/Makefile b/build/f_isoroot/f_repobuild/Makefile
index e95dbf2..709ca6b 100644
--- a/build/f_isoroot/f_repobuild/Makefile
+++ b/build/f_isoroot/f_repobuild/Makefile
@@ -12,6 +12,7 @@ SHELL := /bin/bash
 TOP := $(shell pwd)
 TMP_ROOT_DIR := $(shell echo "$(MIRROR_UBUNTU_ROOT)" | cut -d "/" -f2)
 # Enable use of exact repo commit if defined, else use Fuel main branch
+FUEL_MIRROR_REPO:=https://github.com/openstack/fuel-mirror
 FUEL_MIRROR_COMMIT?=$(FUEL_MAIN_TAG)
 
 include ../../config.mk
@@ -26,7 +27,7 @@ nailgun:
 	sudo apt-get install -y git libxml2-dev libxslt-dev python-dev  python-pip libz-dev libyaml-dev createrepo python-yaml
 	rm -Rf nailgun
 	sudo mkdir -p /var/www/nailgun
-	git clone https://github.com/openstack/fuel-mirror
+	git clone $(FUEL_MIRROR_REPO)
 	cd fuel-mirror && git checkout -q $(FUEL_MIRROR_COMMIT)
 	sudo pip install -U -r ./fuel-mirror/requirements.txt
 	sudo pip install ./fuel-mirror
