From: Stanislaw Kardach <stanislaw.kardach@caviumnetworks.com>
Date: Tue, 8 Mar 2016 21:08:55 +0100
Subject: [PATCH] Add fs for efi partition

---
 fuel_agent/drivers/nailgun.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/fuel_agent/drivers/nailgun.py b/fuel_agent/drivers/nailgun.py
index bc532b4..31aead6 100644
--- a/fuel_agent/drivers/nailgun.py
+++ b/fuel_agent/drivers/nailgun.py
@@ -324,7 +324,9 @@ class Nailgun(BaseDataDriver):
                 # uefi partition (for future use)
                 LOG.debug('Adding UEFI partition on disk %s: size=200' %
                           disk['name'])
-                parted.add_partition(size=200, flags=['esp'])
+                prt = parted.add_partition(size=200, flags=['esp'])
+                partition_scheme.add_fs(device=prt.name, mount='/boot/efi',
+                    fs_type='vfat', fs_label='efs_boot')
 
             LOG.debug('Looping over all volumes on disk %s' % disk['name'])
             for volume in disk['volumes']:
-- 
1.9.1

